{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/v-knob.vue?c7d1","webpack:///./src/components/v-led.vue?be4d","webpack:///./src/components/midi-select.vue?190f","webpack:///./src/app.vue?485e","webpack:///./src/instruments.ts","webpack:///./src/utilities/array.ts","webpack:///./src/utilities/object.ts","webpack:///./src/key-map.ts","webpack:///./src/utilities/number.ts","webpack:///./src/utilities/note.ts","webpack:///./src/components/v-piano-keyboard.vue?e18f","webpack:///./src/utilities/touch-over-dispatcher.ts","webpack:///./src/components/v-piano-keyboard.vue?95ec","webpack:///./src/components/v-piano-keyboard.vue?1d0b","webpack:///./src/components/v-piano-keyboard.vue","webpack:///./src/components/v-led.vue?d46b","webpack:///./src/components/v-led.vue?d765","webpack:///./src/components/v-led.vue?77f7","webpack:///./src/components/v-led.vue","webpack:///./src/components/v-knob.vue?1f24","webpack:///./src/utilities/string.ts","webpack:///./src/components/v-knob.vue?771d","webpack:///./src/components/midi-select.vue?0f16","webpack:///./src/components/v-knob.vue?4d2c","webpack:///./src/components/v-knob.vue","webpack:///./src/components/midi-select.vue?9946","webpack:///./src/components/midi-select.vue?f994","webpack:///./src/components/midi-select.vue","webpack:///./src/app.vue?44f2","webpack:///./src/app.vue?3749","webpack:///./src/app.vue","webpack:///./src/main.ts","webpack:///./src/components/v-piano-keyboard.vue?d982","webpack:///./src/app.vue?d830"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","model","callback","$$v","power","expression","_v","domProps","_s","powerState","on","togglePower","class","disabled","directives","rawName","$event","$$selectedVal","Array","filter","target","options","selected","map","val","_value","instrument","multiple","blurMe","_l","hasOscillator","oscillator","osc","noteOn","noteOff","_e","staticStyle","keyCount","scopedSlots","_u","fn","ref","note","noteToKeyMap","playing","staticRenderFns","oscillators","basic","other","am","fm","fat","all","Predicate","isPoly","last","arr","num","append","item","remove","search","flatMap","index","matches","test","reverse","forEach","atIndex","end","undefined","pred","Function","invert","obj","keys","reduce","inverted","Degrees","Range","touchOvers","move","getKeyClass","style","getKeyStyle","type","indexOf","_k","keyCode","button","notedown","noteup","buttons","preventDefault","stopPropagation","_t","getKeySlotProps","DEGREES_PER_RADIAN","Math","PI","quantize","step","from","rem","quantized","round","rndUp","precision","multiplier","pow","abs","times","mapFn","fromRadians","radians","minPositive","degrees","to","clamp","max","min","span","Note","split","octave","parseInt","transposeFromIndex","halfSteps","indexSum","nextNote","Notes","nextOctave","floor","transpose","getRange","first","count","noteIndex","Type","charAt","Black","White","Placeholder","Touch","getOverTarget","pageX","pageY","document","elementFromPoint","Event","initFrom","event","assign","changedTouches","targetTouches","touches","bubbles","dispatch","eventInit","targets","dispatchEvent","TouchEvent","getContext","touchleave","touchover","current","touch","fetch","hovers","update","leaveTargets","includes","overTargets","hover","identifier","pressed","cls","whiteKeyWidth","blackKeyWidth","isWhite","width","marginLeft","isBlack","eventModel","$emit","startsWith","notes","whiteKeyCount","default","component","state","color","backgroundColor","boxShadow","mouseTurning","touchTurning","isString","something","KNOB_PADDING","KNOB_RANGE","$el","getBoundingClientRect","x","y","height","addEventListener","turn","removeEventListener","id","turnFn","find","e","clientX","clientY","getCenter","originX","originY","atan2","size","rotation","sz","transform","MidiCommand","modifiers","supportsMidi","_n","selectedInputIndex","input","MIDDLE_C_MIDI_VALUE","inputMap","Map","navigator","requestMIDIAccess","access","onMidiStateChanged","newInput","oldInput","onMidiMessage","inputs","hasSelected","has","command","velocity","NoteOff","noteoff","NoteOn","noteon","getKeyCount","innerWidth","instruments","synth","elem","blur","opts","dispose","err","console","error","toDestination","isPlaying","now","prev","updatePlayingPolyphonic","updatePlayingMonophonic","nowNote","prevNote","canSetNote","setNote","triggerAttack","triggerRelease","stop","play","down","setSynth","set","detune","components","VPianoKeyboard","VLed","VKnob","MidiSelect","config","productionTip","render","h","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,eAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,6ECvJT,W,oCCAA,W,2DCAA,W,mMCAI,EAAS,WAAa,IAAIyC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAACF,EAAG,MAAM,CAACG,YAAY,YAAY,CAACH,EAAG,MAAM,CAACG,YAAY,iBAAiB,CAACH,EAAG,QAAQ,CAACI,MAAM,CAACxB,MAAOgB,EAAS,MAAES,SAAS,SAAUC,GAAMV,EAAIW,MAAMD,GAAKE,WAAW,WAAWR,EAAG,QAAQ,CAACJ,EAAIa,GAAG,WAAWT,EAAG,SAAS,CAACU,SAAS,CAAC,YAAcd,EAAIe,GAAGf,EAAIgB,aAAaC,GAAG,CAAC,MAAQjB,EAAIkB,gBAAgB,GAAGd,EAAG,MAAM,CAACG,YAAY,WAAWH,EAAG,MAAM,CAACG,YAAY,qBAAqBY,MAAM,CAAEC,UAAWpB,EAAIW,QAAS,CAACP,EAAG,QAAQ,CAACE,MAAM,CAAC,IAAM,sBAAsB,CAACN,EAAIa,GAAG,gBAAgBT,EAAG,SAAS,CAACiB,WAAW,CAAC,CAAC9C,KAAK,QAAQ+C,QAAQ,UAAUtC,MAAOgB,EAAc,WAAEY,WAAW,eAAeN,MAAM,CAAC,KAAO,oBAAoB,UAAYN,EAAIW,OAAOM,GAAG,CAAC,OAAS,CAAC,SAASM,GAAQ,IAAIC,EAAgBC,MAAM5E,UAAU6E,OAAO3E,KAAKwE,EAAOI,OAAOC,SAAQ,SAASnD,GAAG,OAAOA,EAAEoD,YAAWC,KAAI,SAASrD,GAAG,IAAIsD,EAAM,WAAYtD,EAAIA,EAAEuD,OAASvD,EAAEO,MAAM,OAAO+C,KAAO/B,EAAIiC,WAAWV,EAAOI,OAAOO,SAAWV,EAAgBA,EAAc,IAAIxB,EAAImC,UAAUnC,EAAIoC,GAAIpC,EAAe,aAAE,SAASiC,GAAY,OAAO7B,EAAG,SAAS,CAACU,SAAS,CAAC,MAAQmB,EAAW,YAAcjC,EAAIe,GAAGkB,EAAW1D,YAAW,KAAK6B,EAAG,MAAM,CAACG,YAAY,qBAAqBY,MAAM,CAAEC,UAAWpB,EAAIqC,gBAAiB,CAACjC,EAAG,QAAQ,CAACE,MAAM,CAAC,IAAM,sBAAsB,CAACN,EAAIa,GAAG,gBAAgBT,EAAG,SAAS,CAACiB,WAAW,CAAC,CAAC9C,KAAK,QAAQ+C,QAAQ,UAAUtC,MAAOgB,EAAc,WAAEY,WAAW,eAAeN,MAAM,CAAC,KAAO,oBAAoB,UAAYN,EAAIqC,eAAepB,GAAG,CAAC,OAAS,CAAC,SAASM,GAAQ,IAAIC,EAAgBC,MAAM5E,UAAU6E,OAAO3E,KAAKwE,EAAOI,OAAOC,SAAQ,SAASnD,GAAG,OAAOA,EAAEoD,YAAWC,KAAI,SAASrD,GAAG,IAAIsD,EAAM,WAAYtD,EAAIA,EAAEuD,OAASvD,EAAEO,MAAM,OAAO+C,KAAO/B,EAAIsC,WAAWf,EAAOI,OAAOO,SAAWV,EAAgBA,EAAc,IAAIxB,EAAImC,UAAUnC,EAAIoC,GAAIpC,EAAe,aAAE,SAASuC,GAAK,OAAOnC,EAAG,SAAS,CAACU,SAAS,CAAC,MAAQyB,EAAI,YAAcvC,EAAIe,GAAGwB,SAAU,KAAKnC,EAAG,MAAM,CAACG,YAAY,WAAYP,EAAgB,aAAEI,EAAG,MAAM,CAACG,YAAY,qBAAqBY,MAAM,CAAEC,UAAWpB,EAAIW,QAAS,CAACP,EAAG,QAAQ,CAACE,MAAM,CAAC,IAAM,gBAAgB,CAACN,EAAIa,GAAG,gBAAgBT,EAAG,cAAc,CAACE,MAAM,CAAC,KAAO,cAAc,UAAYN,EAAIW,OAAOM,GAAG,CAAC,OAASjB,EAAIwC,OAAO,QAAUxC,EAAIyC,QAAQ,OAASzC,EAAImC,WAAW,GAAGnC,EAAI0C,KAAKtC,EAAG,IAAI,CAACG,YAAY,SAASD,MAAM,CAAC,KAAO,yCAAyC,MAAQ,mBAAmB,CAACF,EAAG,MAAM,CAACuC,YAAY,CAAC,MAAQ,OAAO,OAAS,QAAQrC,MAAM,CAAC,QAAU,cAAc,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,KAAO,eAAe,EAAI,uvBAAuvBF,EAAG,mBAAmB,CAACE,MAAM,CAAC,GAAK,WAAW,MAAQN,EAAI4C,SAAS,UAAY5C,EAAIW,OAAOkC,YAAY7C,EAAI8C,GAAG,CAAC,CAACxD,IAAI,MAAMyD,GAAG,SAASC,GACn2G,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAAC7C,EAAG,OAAO,CAACU,SAAS,CAAC,YAAcd,EAAIe,GAAGf,EAAIkD,aAAaD,YAAezC,MAAM,CAACxB,MAAOgB,EAAW,QAAES,SAAS,SAAUC,GAAMV,EAAImD,QAAQzC,GAAKE,WAAW,cAAc,IAC5KwC,EAAkB,G,8JCMhBC,EAAc,CACnBC,MAAO,CAAC,OAAQ,SAAU,WAAY,YACtCC,MAAO,CAAC,QAAS,OACjBC,GAAI,CAAC,SAAU,WAAY,aAAc,cACzCC,GAAI,CAAC,SAAU,WAAY,aAAc,cACzCC,IAAK,CAAC,UAAW,YAAa,cAAe,eAC7CC,IAAK,IAENN,EAAYM,IAAZ,yBACIN,EAAYC,OADhB,eAEID,EAAYE,OAFhB,eAGIF,EAAYG,IAHhB,eAIIH,EAAYI,IAJhB,eAKIJ,EAAYK,MAGD,ICxBLE,EDwBK,GACd,CACCrF,KAAM,QACN0D,WAAY,OACZoB,YAAaA,EAAYM,KACvB,CACFpF,KAAM,KACN0D,WAAY,OACZoB,YAAaA,EAAYM,KACxB,CACDpF,KAAM,KACN0D,WAAY,OACZoB,YAAaA,EAAYM,KACxB,CACDpF,KAAM,OACN0D,WAAY,OACZoB,YAAaA,EAAYM,KACxB,CACDpF,KAAM,MACN0D,WAAY,QACX,CACD1D,KAAM,OACN0D,WAAY,OACZoB,YAAaA,EAAYM,IACzBE,QAAQ,GACP,CACDtF,KAAM,QACN0D,WAAY,QAIX,CACD1D,KAAM,WACN0D,WAAY,OACZoB,YAAaA,EAAYM,KACxB,CACDpF,KAAM,QACN0D,WAAY,S,wCCrDR,SAAU6B,EAAQC,EAAmBC,GAC1C,OAAe,MAAPA,EACPD,EAAIA,EAAIpH,OAAS,GACjBoH,EAAIhE,MAAMgE,EAAIpH,OAASqH,GAGnB,SAAUC,EAA+BF,EAAQG,GAEtD,OADAH,EAAI9G,KAAKiH,GACFH,EAKF,SAAUI,EAA+BJ,EAAQK,GAOtD,OANAL,EAAIM,SAAQ,SAACH,EAAMI,GAAS,MACpBC,EAAWL,IAASE,IAAV,UAAqBR,EAAUY,KAAKJ,UAApC,aAAqB,EAAyBF,EAAMI,EAAOP,IAC3E,OAAOQ,EAAUD,EAAQ,MAEzBG,UACAC,SAAQ,SAAAJ,GAAK,OAAIP,EAAIlG,OAAOyG,EAAO,MAC9BP,EAGF,SAAUY,EAAWZ,EAAmBO,GAC7C,IAAMM,EAAON,EAAQ,QAAMO,EAC3B,OAAOd,EAAIhE,MAAMuE,EAAOM,GAAK,IAjC9B,SAAUhB,GACT,SAAgBY,EAA+CM,GAC9D,OAAQA,aAAgBC,SAAYD,OAAYD,EADjC,EAAAL,KAAI,GADrB,CAAUZ,MAAS,K,oBCDb,SAAUoB,EAA2CC,GAC1D,IAAMC,EAAOtI,OAAOsI,KAAKD,GACzB,OAAOC,EAAKC,QAAO,SAACC,EAAU9F,GAE7B,OADA8F,EAASH,EAAI3F,IAAQA,EACd8F,IACL,ICHW,IC+BEC,EAcAC,EC1CP,EFHK,GACd,EAAK,KACL,EAAK,MACL,EAAK,KACL,EAAK,MACL,EAAK,KACL,EAAK,KACL,EAAK,MACL,EAAK,KACL,EAAK,MACL,EAAK,KACL,EAAK,MACL,EAAK,KACL,EAAK,KACL,EAAK,MACL,EAAK,KACL,EAAK,MACL,EAAK,KACL,EAAK,KACL,EAAK,MACL,IAAK,KACL,EAAK,MACL,IAAK,KACL,IAAK,MACL,IAAK,MG1BF,EAAS,WAAa,IAAItF,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,mBAAmBY,MAAM,CAAE,4BAA6BnB,EAAIoB,UAAWH,GAAG,CAAC,UAAY,SAASM,GAAQ,OAAOvB,EAAIuF,WAAWC,KAAKjE,IAAS,SAAW,SAASA,GAAQ,OAAOvB,EAAIuF,WAAWX,IAAIrD,MAAWvB,EAAIoC,GAAIpC,EAAS,OAAE,SAASiD,GAAM,OAAO7C,EAAG,MAAM,CAACd,IAAI2D,EAAK1C,YAAY,uBAAuBY,MAAMnB,EAAIyF,YAAYxC,GAAMyC,MAAO1F,EAAI2F,YAAY1C,GAAO3C,MAAM,CAAC,YAAY2C,GAAMhC,GAAG,CAAC,UAAY,SAASM,GAAQ,OAAIA,EAAOqE,KAAKC,QAAQ,QAAQ7F,EAAI8F,GAAGvE,EAAOwE,QAAQ,OAAO,GAAGxE,EAAOjC,IAAI,CAAC,OAAO,eAAiC,WAAYiC,GAA4B,IAAlBA,EAAOyE,OAAvC,KAA2EhG,EAAIiG,SAAShD,IAAO,QAAU,SAAS1B,GAAQ,OAAIA,EAAOqE,KAAKC,QAAQ,QAAQ7F,EAAI8F,GAAGvE,EAAOwE,QAAQ,OAAO,GAAGxE,EAAOjC,IAAI,CAAC,OAAO,eAAiC,WAAYiC,GAA4B,IAAlBA,EAAOyE,OAAvC,KAA2EhG,EAAIkG,OAAOjD,IAAO,UAAY,SAAS1B,GAAyB,EAAjBA,EAAO4E,SAAenG,EAAIiG,SAAShD,IAAO,WAAa,SAAS1B,GAAyB,EAAjBA,EAAO4E,SAAenG,EAAIkG,OAAOjD,IAAO,WAAa,SAAS1B,GAAgC,OAAxBA,EAAO6E,iBAAwBpG,EAAIiG,SAAShD,IAAO,SAAW,SAAS1B,GAAgC,OAAxBA,EAAO6E,iBAAwBpG,EAAIkG,OAAOjD,IAAO,YAAc,SAAS1B,GAAQ,OAAOvB,EAAIkG,OAAOjD,IAAO,UAAY,SAAS1B,GAAiC,OAAzBA,EAAO8E,kBAAyBrG,EAAIiG,SAAShD,IAAO,WAAa,SAAS1B,GAAiC,OAAzBA,EAAO8E,kBAAyBrG,EAAIkG,OAAOjD,MAAS,CAACjD,EAAIsG,GAAG,MAAM,KAAK,KAAKtG,EAAIuG,gBAAgBtD,KAAQ,MAAK,IAC5/C,EAAkB,G,sDFDhBuD,G,UAAqB,IAAMC,KAAKC,IAUhC,SAAUC,EAAS3C,EAAa4C,GAA8B,IAAhBC,EAAgB,uDAAD,EAClE,GAAa,IAATD,EAAY,OAAO5C,EACvB,IAAM8C,GAAO9C,EAAM6C,GAAQD,EACrBG,EAAYC,EAAMhD,EAAM8C,GACxBG,EAAQH,GAAQF,EAAO,EAC7B,OAAOK,EAAQF,EAAYH,EAAOG,EAG7B,SAAUC,EAAMhD,GAA0B,IAAbkD,EAAa,uDAAD,EAC1CC,EAAaV,KAAKW,IAAI,GAAIX,KAAKY,IAAIH,IAEvC,OADIA,EAAY,IAAGC,EAAa,EAAIA,GAC7BV,KAAKO,MAAMhD,EAAMmD,GAAcA,EAGjC,SAAUG,EAAStD,EAAauD,GAErC,IADA,IAAMxD,EAAM,IAAItC,MAAMuC,GACbM,EAAQ,EAAGA,EAAQN,EAAKM,IAAS,CACzC,IAAM9G,EAAS+J,EAAMxK,KAAKiH,EAAKM,GAC/BP,EAAI9G,KAAKO,GAEV,OAAOuG,GAGR,SAAiBsB,GAEhB,SAAgBmC,EAAYC,GAC3B,OAAOA,EAAUjB,EAGlB,SAAgBkB,EAAYC,GAC3B,OAASA,EAAU,IAAO,KAAO,IALlB,EAAAH,YAAW,EAIX,EAAAE,YAAW,GAN5B,CAAiBrC,MAAO,KAcxB,SAAiBC,GAEhB,SAAgBjG,EAAOwH,EAAce,GACpC,MAAO,CAAEf,OAAMe,MAGhB,SAAgBC,EAAM7D,EAAtB,GAAsD,IAAjB6C,EAAiB,EAAjBA,KAAMe,EAAW,EAAXA,GAC1C,OAAOnB,KAAKqB,IAAIrB,KAAKsB,IAAI/D,EAAK4D,GAAKf,GAGpC,SAAgBmB,EAAhB,GAAwC,IAAjBnB,EAAiB,EAAjBA,KAAMe,EAAW,EAAXA,GAC5B,OAAOA,EAAKf,EAGb,SAAgB/E,EAAIkC,EAAa6C,EAAae,GAC7C,OAAO5D,EAAMgE,EAAKJ,GAAMI,EAAKnB,GAbd,EAAAxH,OAAM,EAIN,EAAAwI,MAAK,EAIL,EAAAG,KAAI,EAIJ,EAAAlG,IAAG,EAdpB,CAAiBwD,MAAK,KC1CtB,SAAU2C,GAmBT,SAAgBC,EAAMjF,GAAU,MACXA,EAAKiF,MAAM,cADA,sBACxB1I,EADwB,KACrB2I,EADqB,KAE/B,MAAO,CACNlF,KAAMzD,EACN2I,OAAQC,SAASD,IAInB,SAASE,EAAmB/D,EAAe6D,EAAgBG,GAC1D,IAAMC,EAAWjE,EAAQgE,EACnBE,EAAW7D,EAAQsD,EAAAQ,MAAOF,EAAWN,EAAAQ,MAAM9L,QAC3C+L,EAAajC,KAAKkC,MAAMJ,EAAWN,EAAAQ,MAAM9L,QAAUwL,EACzD,gBAAUK,GAAV,OAAqBE,GAGtB,SAAgBE,EAAU3F,EAAYqF,GAAiB,MACtBJ,EAAMjF,GAAxBK,EADwC,EAC9CL,KAAakF,EADiC,EACjCA,OACf7D,EAAQ2D,EAAAQ,MAAM5C,QAAQvC,GAC5B,OAAO+E,EAAmB/D,EAAO6D,EAAQG,GAG1C,SAAgBO,EAASC,EAAaC,GAAa,MACzBb,EAAMY,GAAvB7F,EAD0C,EAC1CA,KAAMkF,EADoC,EACpCA,OACRa,EAAYf,EAAAQ,MAAM5C,QAAQ5C,GAChC,OAAOqE,EAAMyB,GAAO,SAAAzE,GAAK,OAAI+D,EAAmBW,EAAWb,EAAQ7D,MA1CvD2D,EAAAQ,MAAiB,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KAK3F,SAAYQ,GACX,mBACA,mBACA,+BAHD,CAAY,EAAAA,OAAA,EAAAA,KAAI,KAMhB,SAAiBA,GAChB,SAAgBrK,EAAIqE,GACnB,OAAOA,EAA2B,MAAnBA,EAAKiG,OAAO,GAC1BD,EAAKE,MAAQF,EAAKG,MAAQH,EAAKI,YAFjB,EAAAzK,IAAG,EADpB,CAAiB,EAAAqK,OAAA,EAAAA,KAAI,KAOL,EAAAf,MAAK,EAeL,EAAAU,UAAS,EAMT,EAAAC,SAAQ,EAxCzB,CAAU,MAAI,KA+CC,IEpDLS,EFoDK,I,qBEpDf,SAAUA,GACT,SAAgBC,EAAhB,GAAqD,IAArBC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,MACtC,OAAOC,SAASC,iBAAiBH,EAAOC,GADzB,EAAAF,cAAa,EAI7B,SAAiBK,GAChB,SAASC,EAASC,GACjB,OAAOlN,OAAOmN,OAAO,GAAID,EAAO,CAC/BE,eAAgBvI,MAAMoF,KAAKiD,EAAME,gBACjCC,cAAexI,MAAMoF,KAAKiD,EAAMG,eAChCC,QAASzI,MAAMoF,KAAKiD,EAAMI,SAC1BC,SAAS,IAIX,SAASC,EAASxE,EAAcyE,EAA2BC,GAC1D,IAAMC,EAAgB,IAAIC,WAAW5E,EAAMyE,GAC3CC,EAAQ5F,SAAQ,SAAA/C,GAAM,cAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAQ4I,cAAcA,MAGjD,SAAgBE,EAAWX,GAAiB,MACrCO,EAAYR,EAASC,GAC3B,MAAO,CACNI,QAAO,UAAEG,EAAUL,sBAAZ,QAA8B,GACrCU,WAAYN,EAAS7K,KAAKuK,EAAO,aAAcO,GAC/CM,UAAWP,EAAS7K,KAAKuK,EAAO,YAAaO,IAL/B,EAAAI,WAAU,EAf3B,CAAiB,EAAAb,QAAA,EAAAA,MAAK,MALvB,CAAUN,MAAK,K,IA+BM,E,WAArB,oCAES,KAAAsB,QAAuC,G,oDAE1Cd,GAAiB,aACsBR,EAAMM,MAAMa,WAAWX,GAA1DI,EADa,EACbA,QAASQ,EADI,EACJA,WAAYC,EADR,EACQA,UACvBC,EAAUV,EAAQpI,KAAI,SAAA+I,GAAK,OAAI,EAAKC,MAAMD,MAC1CE,EAASb,EAAQpI,KAAI,SAAA+I,GAAK,OAAI,EAAKG,OAAOH,MAC1CI,EAAeL,EAAQlJ,QAAO,SAAAC,GAAM,QAAI,OAACoJ,QAAD,IAACA,KAAQG,SAASvJ,OAC1DwJ,EAAcJ,EAAOrJ,QAAO,SAAA0J,GAAK,QAAI,OAACR,QAAD,IAACA,KAASM,SAASE,OAC9DV,EAAWO,GACXN,EAAUQ,K,0BAGPrB,GAAiB,aACYR,EAAMM,MAAMa,WAAWX,GAA/CI,EADY,EACZA,QAASQ,EADG,EACHA,WACXJ,EAAUJ,EAAQpI,KAAI,SAAA+I,GAAK,OAAI,EAAK1G,OAAO0G,MACjDH,EAAWJ,K,+BAGiC,QAA3Be,EAA2B,EAA3BA,WAAY1J,EAAe,EAAfA,OAC7B,kBAAO,EAAA1B,KAAK2K,SAAQS,UAApB,QAAO,EAAaA,GAAgB1J,I,6BAGpBkJ,GAAY,IACpBQ,EAAeR,EAAfQ,WACR,OAAOpL,KAAK2K,QAAQS,GAAc/B,EAAMC,cAAcsB,K,6BAGtCA,GAAY,IACpBQ,EAAeR,EAAfQ,WACF1J,EAAS2H,EAAMC,cAAcsB,GAEnC,cADO5K,KAAK2K,QAAQS,GACZ1J,IAAWkJ,EAAMlJ,OAAU,KAAOA,M,KCzDvB,EAArB,sLA2CasB,GACX,IAAMqI,EAAUrL,KAAKO,MAAM0K,SAASjI,GAC9B2C,EAAO,EAAKqD,KAAKrK,IAAIqE,GAC3B,MAAO,CAAC,wBAAD,OACkB2C,GACxB0F,GAAW,gCACV5J,QAAO,SAAA6J,GAAG,QAAMA,OAjDpB,kCAoDatI,GAAU,IACbuI,EAAiCvL,KAAjCuL,cAAeC,EAAkBxL,KAAlBwL,cACjBC,EAAW,EAAKzC,KAAKrK,IAAIqE,KAAU,EAAKgG,KAAKG,MAC7CuC,EAAQD,EAAUF,EAAgBC,EACxC,MAAO,CACNE,MAAO,QAAF,OAAUA,EAAV,YACLC,WAAY,SAAF,OAAaH,EAAgB,EAA7B,eA1Db,sCA8DiBxI,GACf,MAAO,CACNA,OACA4I,QAAS,EAAK5C,KAAKrK,IAAIqE,KAAU,EAAKgG,KAAKE,MAC3CmC,QAASrL,KAAKO,MAAM0K,SAASjI,MAlEhC,+BAsEUA,GAAU,IACV6I,EAAyB7L,KAAzB6L,WAAY1K,EAAanB,KAAbmB,SAChBA,GAAY,EAAY0K,IAAe7I,IAC1ChD,KAAK8L,MAAM,WAAY9I,GACvBhD,KAAKO,MAAQ,EAAc,EAAcsL,EAAY7I,GAAOA,MA1E/D,6BA8EQA,GAAU,IACR6I,EAAyB7L,KAAzB6L,WAAa1K,EAAYnB,KAAZmB,UAChBA,GAAY0K,EAAWZ,SAASjI,KACpChD,KAAK8L,MAAM,SAAU9I,GACrBhD,KAAKO,MAAQ,EAAcP,KAAK6L,WAAY7I,MAlF/C,gCAuFEhD,KAAKsF,WAAa,IAAI,IAvFxB,4BAgBU,IACAuD,EAAiB7I,KAAjB6I,MAAOC,EAAU9I,KAAV8I,MACf,OAAQ,EAAKF,SAASC,EAAOC,GAAO1E,SAAQ,SAAApB,GAAI,OAC9CA,EAAK+I,WAAW,MAAQ/I,EAAK+I,WAAW,KAAQ,CAAC/I,EAAM,MAAQA,OAnBnE,oCAwBE,OAAOhD,KAAKgM,MACVvK,QAAO,SAAAuB,GAAI,OAAK,EAAKgG,KAAKrK,IAAIqE,KAAU,EAAKgG,KAAKG,SAClDzM,SA1BJ,oCA6BkB,IACRuP,EAAkBjM,KAAlBiM,cACR,OAAOzF,KAAKkC,MAAM,IAAQuD,GAAiB,MA/B7C,oCAkCkB,IACRV,EAAkBvL,KAAlBuL,cACR,MAAuB,IAAhBA,IApCT,iCAwCE,sBAAWvL,KAAKO,WAxClB,GAA4C,QAG3C,gBADC,eAAO,CAAE2L,QAAS,iBAAM,O,4BAIzB,gBADC,eAAK,CAAEA,QAAS,Q,4BAIjB,gBADC,eAAK,CAAEA,QAAS,M,4BAIjB,gBADC,eAAK,CAAEA,SAAS,K,+BAXG,EAAc,gBADlC,QACoB,WCPsX,I,wBCQvYC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,MAIa,EAAAA,E,QCnBX,EAAS,WAAa,IAAIpM,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,QAAQY,MAAO,SAAWnB,EAAIqM,MAAO3G,MAAO1F,EAAS,SACvK,EAAkB,GCID,EAArB,gLASE,OAAOC,KAAKO,MAAQ,KAAO,QAT7B,4BAYU,IACAA,EAAiBP,KAAjBO,MAAO8L,EAAUrM,KAAVqM,MACf,OAAQ9L,EAAa,CACpB+L,gBAAiBD,EACjBE,UAAW,eAAF,OAAiBF,IAFX,OAdlB,GAAkC,QAGjC,gBADC,eAAO,CAAEH,SAAS,K,4BAInB,gBADC,eAAK,CAAEA,QAAS,S,4BALG,EAAI,gBADxB,QACoB,WCL2W,ICQ5X,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCnBX,EAAS,WAAa,IAAInM,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACG,YAAY,SAASmF,MAAO1F,EAAS,MAAEiB,GAAG,CAAC,UAAY,SAASM,GAAQ,OAAIA,EAAOqE,KAAKC,QAAQ,QAAQ7F,EAAI8F,GAAGvE,EAAOwE,QAAQ,OAAO,GAAGxE,EAAOjC,IAAI,CAAC,OAAO,eAAiC,WAAYiC,GAA4B,IAAlBA,EAAOyE,OAAvC,KAA2EhG,EAAIyM,aAAalL,IAAS,WAAa,SAASA,GAAgC,OAAxBA,EAAO6E,iBAAwBpG,EAAI0M,aAAanL,MAAW,CAACnB,EAAG,MAAM,CAACG,YAAY,mBAC7e,EAAkB,G,UCDhB,SAAUoM,EAASC,GACxB,MAA6B,kBAAdA,ECIhB,IAAMC,EAAe,GACfC,EAAaxH,EAAMjG,QAAQ,IAAMwN,EAAc,IAAMA,GAGtC,GAArB,sLAgCU,MACwB5M,KAAK8M,IAAIC,wBAAjCC,EADA,EACAA,EAAGC,EADH,EACGA,EAAGvB,EADN,EACMA,MAAOwB,EADb,EACaA,OACrB,MAAO,CACNF,EAAGA,EAAItB,EAAQ,EACfuB,EAAGA,EAAIC,EAAQ,KApClB,mCAwCcrD,GAAiB,WAC7BjK,OAAOuN,iBAAiB,YAAanN,KAAKoN,MAC1CxN,OAAOuN,iBAAiB,WAAW,WAClCvN,OAAOyN,oBAAoB,YAAa,EAAKD,WA3ChD,mCA+CcvD,GAAiB,WACvByD,EAAKzD,EAAME,eAAe,GAAGqB,WAC7BmC,EAAS,SAAC1D,GACf,IAAMe,EAAQpJ,MAAMoF,KAAKiD,EAAME,gBAC7ByD,MAAK,SAAAC,GAAC,OAAIA,EAAErC,aAAekC,KAChB,MAAT1C,GAAe,EAAKwC,KAAKxC,IAE9BhL,OAAOuN,iBAAiB,YAAaI,GACrC3N,OAAOuN,iBAAiB,YAAY,WACnCvN,OAAOyN,oBAAoB,YAAaE,QAxD3C,8BA4DgE,IAAxDG,EAAwD,EAAxDA,QAASC,EAA+C,EAA/CA,QAA+C,EAC3B3N,KAAK4N,YAA7BC,EADmD,EACtDb,EAAec,EADuC,EAC1Cb,EACPrG,EAAwB5G,KAA7B8H,IAAgBH,EAAa3H,KAAlB6H,IAASlB,EAAS3G,KAAT2G,KACtBqG,EAAIU,EAAUG,EACdZ,EAAIa,EAAUH,EAChB5O,EAAQqG,EAAQmC,YAAYf,KAAKuH,MAAMf,EAAGC,IAC9ClO,EAAQsG,EAAMuC,MAAM7I,EAAO8N,GAC3B9N,EAAQsG,EAAMxD,IAAI9C,EAAO8N,EAAY,CAAEjG,OAAMe,OAC7C3H,KAAKO,MAAQmG,EAAS3H,EAAD,OAAQ4H,QAAR,IAAQA,IAAQ,EAAGC,KApE1C,+BAiBa,IACHrG,EAA8BP,KAA9BO,MAAYqG,EAAkB5G,KAAvB8H,IAAgBH,EAAO3H,KAAZ6H,IAC1B,OAAOxC,EAAMxD,IAAItB,EAAO,CAAEqG,OAAMe,MAAMkF,KAnBxC,4BAsBU,IACAmB,EAAmBhO,KAAnBgO,KAAMC,EAAajO,KAAbiO,SACRC,EAAKxB,EAASsB,GAAQA,EAAjB,UAA2BA,EAA3B,MACX,MAAO,CACNtC,MAAOwC,EACPhB,OAAQgB,EACRC,UAAW,UAAF,OAAYF,EAAZ,aA5BZ,GAAmC,QAGlC,gBADC,eAAO,CAAE/B,QAAS,K,6BAInB,gBADC,eAAK,CAAEA,QAAS,M,4BAIjB,gBADC,eAAK,CAAEA,QAAS,M,2BAIjB,gBADC,eAAK,CAAEA,QAAS,K,2BAIjB,gBADC,eAAK,CAAEA,QAAS,Q,4BAdG,GAAK,gBADzB,QACoB,QCFhBkC,GDEgB,MET4W,MCQ7X,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,OAIa,M,QCnBX,GAAS,WAAa,IAAIrO,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACiB,WAAW,CAAC,CAAC9C,KAAK,QAAQ+C,QAAQ,iBAAiBtC,MAAOgB,EAAsB,mBAAEY,WAAW,qBAAqB0N,UAAU,CAAC,QAAS,KAAQ/N,YAAY,cAAcY,MAAM,CAAC,iBAAkBnB,EAAIuO,cAAcjO,MAAM,CAAC,SAAWN,EAAIoB,UAAUH,GAAG,CAAC,OAAS,CAAC,SAASM,GAAQ,IAAIC,EAAgBC,MAAM5E,UAAU6E,OAAO3E,KAAKwE,EAAOI,OAAOC,SAAQ,SAASnD,GAAG,OAAOA,EAAEoD,YAAWC,KAAI,SAASrD,GAAG,IAAIsD,EAAM,WAAYtD,EAAIA,EAAEuD,OAASvD,EAAEO,MAAM,OAAOgB,EAAIwO,GAAGzM,MAAQ/B,EAAIyO,mBAAmBlN,EAAOI,OAAOO,SAAWV,EAAgBA,EAAc,IAAI,SAASD,GAAQ,OAAOvB,EAAI+L,MAAM,SAAUxK,OAAY,CAACnB,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,KAAK,CAACN,EAAIa,GAAG,UAAUb,EAAIoC,GAAIpC,EAAU,QAAE,SAASgD,GACnxB,IAAI1D,EAAM0D,EAAI,GACV0L,EAAQ1L,EAAI,GAChB,OAAO5C,EAAG,SAAS,CAACd,IAAIA,EAAIwB,SAAS,CAAC,MAAQxB,EAAI,YAAcU,EAAIe,GAAG2N,EAAMnQ,aAAY,IACrF,GAAkB,G,uDHChBoQ,GAAsB,IAE5B,SAAKN,GACJ,8BACA,6BAFD,CAAKA,QAAW,KAMhB,IAAqB,GAArB,yG,0BAKC,EAAAO,SAAiC,IAAIC,IACrC,EAAAJ,mBAA6B,GAN9B,wNA0BOxO,KAAKsO,aA1BZ,iEA2BuBO,UAAUC,oBA3BjC,OA2BQC,EA3BR,OAmCEA,EAAO5B,iBAAiB,eAAe,kBAAM,EAAK6B,mBAAmBD,MACrE/O,KAAKgP,mBAAmBD,GApC1B,oJAwCsBE,EAAoCC,GAChD,OAARA,QAAQ,IAARA,KAAU7B,oBAAoB,cAAerN,KAAKmP,eAC1C,OAARF,QAAQ,IAARA,KAAU9B,iBAAiB,cAAenN,KAAKmP,iBA1CjD,yCA6CoBJ,GAClB/O,KAAK2O,SAAWI,EAAOK,OACnBpP,KAAKqP,cAAgBrP,KAAK2O,SAASW,IAAItP,KAAKwO,sBAC/CxO,KAAKwO,mBAAqB,MAhD7B,oCAmDe3E,GAA+B,qBACTA,EAAM3N,KADG,GACrCqT,EADqC,KAC5BxQ,EAD4B,KACrByQ,EADqB,KAEtCxM,EAAO,EAAK2F,UAAU,KAAM5J,EAAQ2P,IACtCa,IAAYnB,GAAYqB,QAC3BzP,KAAK0P,QAAQ1M,GACLuM,IAAYnB,GAAYuB,SAC5BH,EACHxP,KAAK4P,OAAO5M,GAEZhD,KAAK0P,QAAQ1M,MA5DjB,6BAiEQA,MAjER,8BAoESA,MApET,mCASE,QAAS6L,UAAUC,oBATrB,6BAaE,OAAOtN,MAAMoF,KAAK5G,KAAK2O,YAbzB,oCAgBkB,IACYtK,EAAoBrE,KAAxCwO,mBAA2BG,EAAa3O,KAAb2O,SACnC,OAAOtK,GAASsK,EAAShQ,IAAI0F,IAAU,OAlBzC,kCAsBE,QAASrE,KAAKwO,uBAtBhB,GAAwC,QAGvC,gBADC,eAAK,CAAEtC,SAAS,K,gCAsCjB,gBADC,eAAM,kB,oCAIN,MAsBD,gBADC,kB,sBACoB,MAGrB,gBADC,kB,uBACqB,MApEF,GAAU,gBAD9B,QACoB,cIbiX,MCQlY,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCLT2D,GAAc,kBAAOjQ,OAAOkQ,WAAa,IAAO,GAAK,IAKtC,GAArB,yG,0BAEC,EAAA5M,QAAkB,GAClB,EAAA6M,YAAcA,EACd,EAAA/N,WAAyB+N,EAAY,GACrC,EAAAC,MAA2B,KAC3B,EAAArN,SAAWkN,KANZ,2DAiEW7M,GAAW,IACZE,EAAYlD,KAAZkD,QACR,OAAgB,MAARF,IAAkBE,EAAQxG,OAASwG,EAAQ+H,SAASjI,KAnE9D,oCAuEEhD,KAAKU,OAASV,KAAKU,QAvErB,6BA0EQmJ,GAAY,MACZoG,EAAOpG,EAAMnI,OACf,OAAJuO,QAAI,IAAJA,GAAA,UAAAA,EAAMC,YAAN,cAAAD,KA5EF,iCAgFuE,6DAAfjQ,KAAKgC,WAAU,IAA3DoB,mBAA2D,MAA7C,GAA6C,EAAzCpB,EAAyC,EAAzCA,WACtB2D,EAAYvC,EAAY,GACxB+M,EAAOxK,EAAO,CAAEtD,WAAY,CAAEsD,cAAUf,EAC9C,IAAI,MAAE,UAAA5E,KAAKgQ,aAAL,SAAYI,UAClB,MAAOC,GAAOC,QAAQC,MAAMF,GAC5BrQ,KAAKgQ,MAAQ,IAAIhO,EAAWmO,GAAMK,kBArFpC,6BAwFQxN,GACDhD,KAAKyQ,UAAUzN,KACnBhD,KAAKkD,QAAL,yBAAmBlD,KAAKkD,SAAxB,CAAiCF,OA1FpC,8BA6FSA,GACHhD,KAAKyQ,UAAUzN,KAClBhD,KAAKkD,QAAUlD,KAAKkD,QAAQzB,QAAO,SAAAlC,GAAC,OAAIA,IAAMyD,QA/FjD,oCAmGe0N,EAAaC,GACrB3Q,KAAKU,QACNV,KAAKgC,WAAW4B,OACnB5D,KAAK4Q,wBAAwBF,EAAKC,GAElC3Q,KAAK6Q,wBAAwBH,EAAKC,MAxGrC,8CA2GyBD,EAAaC,GAAY,IACxCX,EAAUhQ,KAAVgQ,MACFc,EAAU,EAAYJ,GACtBK,EAAW,EAAYJ,GACvBK,IAAc,OAAChB,QAAD,IAACA,MAAOiB,SACxBH,IAAYC,IACXD,GAAWC,GAAYC,EACrB,OAALhB,QAAK,IAALA,KAAOiB,QAAQH,GACPA,IAAYH,EAAK1F,SAAS6F,GAC7B,OAALd,QAAK,IAALA,KAAOkB,cAAcJ,GAEhB,OAALd,QAAK,IAALA,KAAOmB,oBAtHX,8CA0HyBT,EAAaC,GAAY,IACxCX,EAAUhQ,KAAVgQ,MACFoB,EAAOT,EAAKlP,QAAO,SAAAuB,GAAI,OAAK0N,EAAIzF,SAASjI,MACzCqO,EAAOX,EAAIjP,QAAO,SAAAuB,GAAI,OAAK2N,EAAK1F,SAASjI,MAC/CoO,EAAK3M,SAAQ,SAAAzB,GAAI,cAAIgN,QAAJ,IAAIA,OAAJ,EAAIA,EAAOmB,eAAenO,MAC3CqO,EAAK5M,SAAQ,SAAAzB,GAAI,cAAIgN,QAAJ,IAAIA,OAAJ,EAAIA,EAAOkB,cAAclO,QA/H5C,gCAkIQ,WACNpD,OAAOuN,iBAAiB,UAAU,SAAAtD,GACjC,EAAKlH,SAAWkN,QAGjBjQ,OAAOuN,iBAAiB,WAAW,SAAAtD,GAClC,IAAM7G,EAAO,EAAO6G,EAAMxK,KACtB,EAAKqB,OAAkB,MAARsC,IAAkB,EAAKyN,UAAUzN,KACnD,EAAKE,QAAL,yBAAmB,EAAKA,SAAxB,CAAiCF,QAGnCpD,OAAOuN,iBAAiB,SAAS,SAAAtD,GAChC,IAAM7G,EAAO,EAAO6G,EAAMxK,KACtB,EAAKqB,OAAkB,MAARsC,IAClB,EAAKE,QAAU,EAAKA,QAAQzB,QAAO,SAAA6P,GAAI,OAAIA,IAAStO,WAhJxD,4BASE,OAAsB,MAAdhD,KAAKgQ,OATf,aAYWtP,GACT,GAAIA,EAAOV,KAAKuR,eACX,CACJvR,KAAKkD,QAAU,GACf,IAAI,MAAE,UAAAlD,KAAKgQ,aAAL,SAAYI,UAClB,MAAOC,GAAOC,QAAQC,MAAMF,GAC5BrQ,KAAKgQ,MAAQ,QAlBhB,kCAsBgB,QACd,2BAAOhQ,KAAKgC,kBAAZ,aAAO,EAAiBoB,mBAAxB,QAAuC,KAvBzC,iCA0Be,UACb,OAAO,UAAApD,KAAKgQ,aAAL,mBAAYrR,aAAZ,mBAAmB0D,kBAAnB,eAA+BsD,OAAQ,IA3BhD,aA8BgBrD,GACI,MAAdtC,KAAKgQ,OACRhQ,KAAKgQ,MAAMwB,IAAI,CAAEnP,WAAY,CAAEsD,KAAMrD,OAhCxC,oCAoCE,QAAStC,KAAKqC,aApChB,iCAwCE,OAAOrC,KAAKU,MAAQ,KAAO,QAxC7B,mCA2CiB,MACf,iBAAOV,KAAKgC,WAAW4B,cAAvB,WA5CF,6BA+CW,QACT,2BAAO5D,KAAKgQ,aAAZ,aAAO,EAAYyB,OAAO1S,aAA1B,QAAmC,GAhDrC,aAmDY0S,GAAc,IAChBzB,EAAUhQ,KAAVgQ,MACK,MAATA,IACHA,EAAMyB,OAAO1S,MAAQ0S,KAtDxB,mCA0DE,OAAO,EAAe,KA1DxB,mCA8DE,QAAS5C,UAAUC,sBA9DrB,GAAiC,QAgFhC,gBADC,eAAM,e,wBAON,MAaD,gBADC,eAAM,Y,6BAON,MAzGmB,GAAG,gBAHvB,eAAU,CACV4C,WAAY,CAAEC,eAAA,EAAgBC,KAAA,EAAMC,MAAA,GAAOC,WAAA,OAEvB,cCnBuV,MCQxW,I,UAAY,eACd,GACA,EACA3O,GACA,EACA,KACA,WACA,OAIa,M,QChBf,OAAI4O,OAAOC,eAAgB,EAE3B,IAAI,OAAI,CACPC,OAAQ,SAAAC,GAAC,OAAIA,EAAE,OACbC,OAAO,S,kCCPV,W,kCCAA","file":"js/app.cfa0ca7e.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/tone-synth/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-knob.vue?vue&type=style&index=0&id=152c8123&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-led.vue?vue&type=style&index=0&id=72e23921&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./midi-select.vue?vue&type=style&index=0&id=c3650428&lang=sass&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"settings\"},[_c('div',{staticClass:\"power setting\"},[_c('v-led',{model:{value:(_vm.power),callback:function ($$v) {_vm.power=$$v},expression:\"power\"}}),_c('label',[_vm._v(\"power\")]),_c('button',{domProps:{\"textContent\":_vm._s(_vm.powerState)},on:{\"click\":_vm.togglePower}})],1),_c('div',{staticClass:\"spacer\"}),_c('div',{staticClass:\"instrument setting\",class:{ disabled: !_vm.power }},[_c('label',{attrs:{\"for\":\"instrument-select\"}},[_vm._v(\"instrument\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.instrument),expression:\"instrument\"}],attrs:{\"name\":\"instrument-select\",\"disabled\":!_vm.power},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.instrument=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.blurMe]}},_vm._l((_vm.instruments),function(instrument){return _c('option',{domProps:{\"value\":instrument,\"textContent\":_vm._s(instrument.name)}})}),0)]),_c('div',{staticClass:\"oscillator setting\",class:{ disabled: !_vm.hasOscillator }},[_c('label',{attrs:{\"for\":\"oscillator-select\"}},[_vm._v(\"oscillator\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.oscillator),expression:\"oscillator\"}],attrs:{\"name\":\"oscillator-select\",\"disabled\":!_vm.hasOscillator},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.oscillator=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.blurMe]}},_vm._l((_vm.oscillators),function(osc){return _c('option',{domProps:{\"value\":osc,\"textContent\":_vm._s(osc)}})}),0)]),_c('div',{staticClass:\"spacer\"}),(_vm.supportsMidi)?_c('div',{staticClass:\"midi-input setting\",class:{ disabled: !_vm.power }},[_c('label',{attrs:{\"for\":\"midi-select\"}},[_vm._v(\"midi input\")]),_c('midi-select',{attrs:{\"name\":\"midi-select\",\"disabled\":!_vm.power},on:{\"noteon\":_vm.noteOn,\"noteoff\":_vm.noteOff,\"change\":_vm.blurMe}})],1):_vm._e(),_c('a',{staticClass:\"github\",attrs:{\"href\":\"https://github.com/romancow/tone-synth\",\"title\":\"View on GitHub\"}},[_c('svg',{staticStyle:{\"width\":\"24px\",\"height\":\"24px\"},attrs:{\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"fill\":\"currentColor\",\"d\":\"M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z\"}})])])]),_c('v-piano-keyboard',{attrs:{\"id\":\"my-piano\",\"count\":_vm.keyCount,\"disabled\":!_vm.power},scopedSlots:_vm._u([{key:\"key\",fn:function(ref){\nvar note = ref.note;\nreturn [_c('span',{domProps:{\"textContent\":_vm._s(_vm.noteToKeyMap[note])}})]}}]),model:{value:(_vm.playing),callback:function ($$v) {_vm.playing=$$v},expression:\"playing\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as Tone from 'tone'\n\nexport type Instrument = {\n\tname: string,\n\tinstrument: typeof Tone.Synth,\n\toscillators?: string[],\n\tisPoly?: boolean\n}\n\nconst oscillators = {\n\tbasic: [\"sine\", \"square\", \"sawtooth\", \"triangle\"],\n\tother: [\"pulse\", \"pwm\"],\n\tam: [\"amsine\", \"amsquare\", \"amsawtooth\", \"amtriangle\"],\n\tfm: [\"fmsine\", \"fmsquare\", \"fmsawtooth\", \"fmtriangle\"],\n\tfat: [\"fatsine\", \"fatsquare\", \"fatsawtooth\", \"fattriangle\"],\n\tall: [] as string[]\n}\noscillators.all = [\n\t...oscillators.basic,\n\t...oscillators.other,\n\t...oscillators.am,\n\t...oscillators.fm,\n\t...oscillators.fat\n]\n\nexport default [\n\t{\n\t\tname: 'basic',\n\t\tinstrument: Tone.Synth,\n\t\toscillators: oscillators.all\n\t}, {\n\t\tname: 'am',\n\t\tinstrument: Tone.AMSynth,\n\t\toscillators: oscillators.all\n\t},{\n\t\tname: 'fm',\n\t\tinstrument: Tone.FMSynth,\n\t\toscillators: oscillators.all\n\t},{\n\t\tname: 'mono',\n\t\tinstrument: Tone.MonoSynth,\n\t\toscillators: oscillators.all\n\t},{\n\t\tname: 'duo',\n\t\tinstrument: Tone.DuoSynth\n\t},{\n\t\tname: 'poly',\n\t\tinstrument: Tone.PolySynth,\n\t\toscillators: oscillators.all,\n\t\tisPoly: true\n\t},{\n\t\tname: 'pluck',\n\t\tinstrument: Tone.PluckSynth\n\t// },{\n\t// \tname: 'noise',\n\t// \tinstrument: Tone.NoiseSynth\n\t},{\n\t\tname: 'membrane',\n\t\tinstrument: Tone.MembraneSynth,\n\t\toscillators: oscillators.all\n\t},{\n\t\tname: 'metal',\n\t\tinstrument: Tone.MetalSynth\n\t// }, {\n\t// \tname: 'sampler',\n\t// \tinstrument: Tone.Sampler\n\t}\n] as Instrument[]\n","type Predicate<T, A extends readonly T[]> = (item: T, index: number, arr: A) => boolean\nnamespace Predicate {\n\texport function test<P extends Predicate<any, readonly any[]>>(pred: P | unknown) {\n\t\treturn (pred instanceof Function) ? pred as P : undefined\n\t}\n}\n\nexport function last<T>(arr: readonly T[]): T  \nexport function last<T>(arr: readonly T[], num: number): T[]\nexport function last<T>(arr: readonly T[], num?: number): T | T[] {\n\treturn (num == null) ?\n\t\tarr[arr.length - 1] :\n\t\tarr.slice(arr.length - num)\n}\n\nexport function append<T, A extends T[] = T[]>(arr: A, item: T) {\n\tarr.push(item)\n\treturn arr\n}\n\nexport function remove<T, A extends T[] = T[]>(arr: A, search: T): A\nexport function remove<T, A extends T[] = T[]>(arr: A, search: Predicate<T, A>): A\nexport function remove<T, A extends T[] = T[]>(arr: A, search: T | Predicate<T, A>) {\n\tarr.flatMap((item, index) => {\n\t\t\tconst matches = (item === search) || Predicate.test(search)?.(item, index, arr)\n\t\t\treturn matches ? index : []\n\t\t})\n\t\t.reverse()\n\t\t.forEach(index => arr.splice(index, 1))\n\treturn arr\n}\n\nexport function atIndex<T>(arr: readonly T[], index: number) {\n\tconst end = (index + 1) || undefined\n\treturn arr.slice(index, end)[0]\n}\n","export function invert<K extends string, V extends string>(obj: { [k in K]: V }) {\n\tconst keys = Object.keys(obj) as K[]\n\treturn keys.reduce((inverted, key) => {\n\t\tinverted[obj[key]] = key\n\t\treturn inverted\n\t}, {} as { [key: string]: K }) as { [v in V]: K }\n}\n","import type Note from '@/utilities/note'\n\nexport default {\n\t\"q\": \"C3\",\n\t\"2\": \"C#3\",\n\t\"w\": \"D3\",\n\t\"3\": \"D#3\",\n\t\"e\": \"E3\",\n\t\"r\": \"F3\",\n\t\"5\": \"F#3\",\n\t\"t\": \"G3\",\n\t\"6\": \"G#3\",\n\t\"y\": \"A3\",\n\t\"7\": \"A#3\",\n\t\"u\": \"B3\",\n\t\"v\": \"C4\",\n\t\"g\": \"C#4\",\n\t\"b\": \"D4\",\n\t\"h\": \"D#4\",\n\t\"n\": \"E4\",\n\t\"m\": \"F4\",\n\t\"k\": \"F#4\",\n\t\",\": \"G4\",\n\t\"l\": \"G#4\",\n\t\".\": \"A4\",\n\t\";\": \"A#4\",\n\t\"/\": \"B4\"\n} as Record<string, Note>\n","const DEGREES_PER_RADIAN = 180 / Math.PI\n\nexport function isNumber(something: any): something is number {\n\treturn (typeof something === 'number')\n}\n\nexport function clamp(num: number, min: number, max: number) {\n\treturn Range.clamp(num, { from: min, to: max })\n}\n\nexport function quantize(num: number, step: number, from: number = 0) {\n\tif (step === 0) return num\n\tconst rem = (num - from) % step\n\tconst quantized = round(num - rem)\n\tconst rndUp = rem >= (step / 2)\n\treturn rndUp ? quantized + step : quantized\n}\n\nexport function round(num: number, precision = 0) {\n\tlet multiplier = Math.pow(10, Math.abs(precision))\n\tif (precision < 0) multiplier = 1 / multiplier\n\treturn Math.round(num * multiplier) / multiplier\n}\n\nexport function times<T>(num: number, mapFn: (index: number) => T) {\n\tconst arr = new Array(num) as T[]\n\tfor (let index = 0; index < num; index++) {\n\t\tconst result = mapFn.call(num, index)\n\t\tarr.push(result)\n\t}\n\treturn arr\n}\n\nexport namespace Degrees {\n\n\texport function fromRadians(radians: number) {\n\t\treturn radians * DEGREES_PER_RADIAN\n\t}\n\t\n\texport function minPositive(degrees: number) {\n\t\treturn ((degrees % 360) + 360) % 360\n\t}\n\n}\n\nexport type Range = { from: number, to: number }\n\nexport namespace Range {\n\n\texport function create(from: number, to: number) {\n\t\treturn { from, to }\n\t}\n\n\texport function clamp(num: number, { from, to }: Range) {\n\t\treturn Math.max(Math.min(num, to), from)\n\t}\n\n\texport function span({ from, to }: Range) {\n\t\treturn to - from\n\t}\n\n\texport function map(num: number, from: Range, to: Range) {\n\t\treturn num * span(to) / span(from)\n\t}\n}\n","import { times } from '@/utilities/number'\nimport { atIndex } from '@/utilities/array'\n\ntype Note = `${Note.Basic}${Note.Octave}`\n\nnamespace Note {\t\n\texport const Notes: Basic[] = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B']\n\n\texport type Basic = 'C' | 'C#' | 'D' | 'D#' | 'E' | 'F' | 'F#' | 'G' | 'G#' | 'A' | 'A#' | 'B'\n\texport type Octave = -4 | -3 | -2 | -1 | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11\n\n\texport enum Type {\n\t\tWhite = 'white',\n\t\tBlack = 'black',\n\t\tPlaceholder = 'placeholder'\n\t}\n\n\texport namespace Type {\n\t\texport function get(note: Note | null) {\n\t\t\treturn note ? (note.charAt(1) === \"#\") ?\n\t\t\t\tType.Black : Type.White : Type.Placeholder\n\t\t}\n\t}\n\n\texport function split(note: Note) {\n\t\tconst [n, octave] = note.split(/(-?[\\d]+)$/)\n\t\treturn { \n\t\t\tnote: n as Basic,\n\t\t\toctave: parseInt(octave) as Octave\n\t\t}\n\t}\n\n\tfunction transposeFromIndex(index: number, octave: number, halfSteps: number) {\n\t\tconst indexSum = index + halfSteps\n\t\tconst nextNote = atIndex(Notes, indexSum % Notes.length)\n\t\tconst nextOctave = Math.floor(indexSum / Notes.length) + octave\n\t\treturn `${nextNote}${nextOctave}` as Note \n\t}\n\n\texport function transpose(note: Note, halfSteps: number) {\n\t\tconst { note: basic, octave } = split(note)\n\t\tconst index = Notes.indexOf(basic)\n\t\treturn transposeFromIndex(index, octave, halfSteps)\n\t}\n\n\texport function getRange(first: Note, count: number) {\n\t\tconst { note, octave } = split(first)\n\t\tconst noteIndex = Notes.indexOf(note)\n\t\treturn times(count, index => transposeFromIndex(noteIndex, octave, index))\n\t}\n}\n\nexport default Note\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"v-piano-keyboard\",class:{ \"v-piano-keyboard-disabled\": _vm.disabled },on:{\"touchmove\":function($event){return _vm.touchOvers.move($event)},\"touchend\":function($event){return _vm.touchOvers.end($event)}}},_vm._l((_vm.notes),function(note){return _c('div',{key:note,staticClass:\"v-piano-keyboard-key\",class:_vm.getKeyClass(note),style:(_vm.getKeyStyle(note)),attrs:{\"data-note\":note},on:{\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.notedown(note)},\"mouseup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.noteup(note)},\"mouseover\":function($event){$event.buttons & 1 && _vm.notedown(note)},\"mouseleave\":function($event){$event.buttons & 1 && _vm.noteup(note)},\"touchstart\":function($event){$event.preventDefault();return _vm.notedown(note)},\"touchend\":function($event){$event.preventDefault();return _vm.noteup(note)},\"touchcancel\":function($event){return _vm.noteup(note)},\"touchover\":function($event){$event.stopPropagation();return _vm.notedown(note)},\"touchleave\":function($event){$event.stopPropagation();return _vm.noteup(note)}}},[_vm._t(\"key\",null,null,_vm.getKeySlotProps(note))],2)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","namespace Touch {\n\texport function getOverTarget({ pageX, pageY }: Touch) {\n\t\treturn document.elementFromPoint(pageX, pageY) as EventTarget\n\t}\n\n\texport namespace Event {\n\t\tfunction initFrom(event: TouchEvent) {\n\t\t\treturn Object.assign({}, event, {\n\t\t\t\tchangedTouches: Array.from(event.changedTouches),\n\t\t\t\ttargetTouches: Array.from(event.targetTouches),\n\t\t\t\ttouches: Array.from(event.touches),\n\t\t\t\tbubbles: true\n\t\t\t}) as TouchEventInit\n\t\t}\n\n\t\tfunction dispatch(type: string, eventInit: TouchEventInit, targets: (EventTarget | null)[]) {\n\t\t\tconst dispatchEvent = new TouchEvent(type, eventInit)\n\t\t\ttargets.forEach(target => target?.dispatchEvent(dispatchEvent))\n\t\t}\n\n\t\texport function getContext(event: TouchEvent) {\n\t\t\tconst eventInit = initFrom(event)\n\t\t\treturn {\n\t\t\t\ttouches: eventInit.changedTouches ?? [],\n\t\t\t\ttouchleave: dispatch.bind(event, 'touchleave', eventInit),\n\t\t\t\ttouchover: dispatch.bind(event, 'touchover', eventInit)\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default class TouchOverDispatcher {\n\n\tprivate current: Record<number, EventTarget> = {}\n\n\tmove(event: TouchEvent) {\n\t\tconst { touches, touchleave, touchover } = Touch.Event.getContext(event)\n\t\tconst current = touches.map(touch => this.fetch(touch))\n\t\tconst hovers = touches.map(touch => this.update(touch))\n\t\tconst leaveTargets = current.filter(target => !hovers?.includes(target))\n\t\tconst overTargets = hovers.filter(hover => !current?.includes(hover))\n\t\ttouchleave(leaveTargets)\n\t\ttouchover(overTargets)\n\t}\n\n\tend(event: TouchEvent) {\n\t\tconst { touches, touchleave } = Touch.Event.getContext(event)\n\t\tconst targets = touches.map(touch => this.remove(touch))\n\t\ttouchleave(targets)\n\t}\n\n\tprotected fetch({ identifier, target }: Touch) {\n\t\treturn this.current[identifier] ??= target\n\t}\n\n\tprotected update(touch: Touch) {\n\t\tconst { identifier } = touch\n\t\treturn this.current[identifier] = Touch.getOverTarget(touch)\n\t}\n\n\tprotected remove(touch: Touch) {\n\t\tconst { identifier } = touch\n\t\tconst target = Touch.getOverTarget(touch)\n\t\tdelete this.current[identifier]\n\t\treturn (target === touch.target) ? null : target\n\t}\n\n}","\nimport { Vue, Component, VModel, Prop } from 'vue-property-decorator'\nimport Note from '@/utilities/note'\nimport TouchOverDispatcher from '@/utilities/touch-over-dispatcher'\nimport * as _Array from '@/utilities/array'\n\n@Component\nexport default class VPianoKeyboard extends Vue {\n\n\t@VModel({ default: () => [] })\n\tmodel!: Note[]\n\n\t@Prop({ default: 'C3'})\n\tfirst!: Note\n\n\t@Prop({ default: 24 })\n\tcount!: number\n\n\t@Prop({ default: false })\n\tdisabled!: boolean\n\n\ttouchOvers!: TouchOverDispatcher\n\n\tget notes() {\n\t\tconst { first, count } = this\n\t\treturn  Note.getRange(first, count).flatMap(note =>\n\t\t\t(note.startsWith('E') || note.startsWith('B')) ? [note, null] : note\n\t\t)\n\t}\n\n\tget whiteKeyCount() {\n\t\treturn this.notes\n\t\t\t.filter(note => (Note.Type.get(note) === Note.Type.White))\n\t\t\t.length\n\t}\n\n\tget whiteKeyWidth() {\n\t\tconst { whiteKeyCount } = this\n\t\treturn Math.floor(10000 / whiteKeyCount) / 100\n\t}\n\n\tget blackKeyWidth() {\n\t\tconst { whiteKeyWidth } = this\n\t\treturn whiteKeyWidth * 0.65\n\t}\n\n\tget eventModel() {\n\t\treturn [...this.model]\n\t}\n\n\tgetKeyClass(note: Note) {\n\t\tconst pressed = this.model.includes(note)\n\t\tconst type = Note.Type.get(note)\n\t\treturn [\n\t\t\t`v-piano-keyboard-key-${type}`,\n\t\t\tpressed && \"v-piano-keyboard-key-pressed\"\n\t\t].filter(cls => !!cls)\n\t}\n\n\tgetKeyStyle(note: Note) {\n\t\tconst { whiteKeyWidth, blackKeyWidth } = this\n\t\tconst isWhite = (Note.Type.get(note) === Note.Type.White)\n\t\tconst width = isWhite ? whiteKeyWidth : blackKeyWidth\n\t\treturn { \n\t\t\twidth: `calc(${width}% + 1px)`,\n\t\t\tmarginLeft: `calc(-${ (blackKeyWidth / 2) }% - 1px)`,\n\t\t}\n\t}\n\n\tgetKeySlotProps(note: Note) {\n\t\treturn {\n\t\t\tnote,\n\t\t\tisBlack: Note.Type.get(note) === Note.Type.Black,\n\t\t\tpressed: this.model.includes(note)\n\t\t}\n\t}\n\n\tnotedown(note: Note) {\n\t\tconst { eventModel, disabled } = this\n\t\tif(!disabled && _Array.last(eventModel) != note) {\n\t\t\tthis.$emit('notedown', note)\n\t\t\tthis.model = _Array.append(_Array.remove(eventModel, note), note)\n\t\t}\n\t}\n\n\tnoteup(note: Note) {\n\t\tconst { eventModel , disabled} = this\n\t\tif (!disabled && eventModel.includes(note)) {\n\t\t\tthis.$emit('noteup', note)\n\t\t\tthis.model = _Array.remove(this.eventModel, note)\n\t\t}\n\t}\n\n\tcreated() {\n\t\tthis.touchOvers = new TouchOverDispatcher()\n\t}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-piano-keyboard.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-piano-keyboard.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v-piano-keyboard.vue?vue&type=template&id=14a00721&scoped=true&lang=pug&\"\nimport script from \"./v-piano-keyboard.vue?vue&type=script&lang=ts&\"\nexport * from \"./v-piano-keyboard.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./v-piano-keyboard.vue?vue&type=style&index=0&id=14a00721&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"14a00721\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"v-led\",class:(\"v-led-\" + _vm.state),style:(_vm.style)})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport Vue from 'vue'\nimport { Component, VModel, Prop } from 'vue-property-decorator'\n\n@Component\nexport default class VLed extends Vue {\n\n\t@VModel({ default: false})\n\tmodel!: boolean\n\n\t@Prop({ default: 'red'})\n\tcolor!: string\n\n\tget state() {\n\t\treturn this.model ? 'on' : 'off'\n\t}\n\n\tget style() {\n\t\tconst { model, color } = this\n\t\treturn !model ? {} : {\n\t\t\tbackgroundColor: color,\n\t\t\tboxShadow: `0px 0px 2px ${color}`\n\t\t}\n\t}\n\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-led.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-led.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v-led.vue?vue&type=template&id=72e23921&scoped=true&lang=pug&\"\nimport script from \"./v-led.vue?vue&type=script&lang=ts&\"\nexport * from \"./v-led.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./v-led.vue?vue&type=style&index=0&id=72e23921&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72e23921\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"v-knob\",style:(_vm.style),on:{\"mousedown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }return _vm.mouseTurning($event)},\"touchstart\":function($event){$event.preventDefault();return _vm.touchTurning($event)}}},[_c('div',{staticClass:\"v-knob-tick\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function isString(something: any): something is string {\n\treturn (typeof something === 'string')\n}\n","\nimport { Vue, Component, Prop, VModel } from 'vue-property-decorator'\nimport { isString } from '@/utilities/string'\nimport { quantize, Degrees, Range } from '@/utilities/number'\n\nconst KNOB_PADDING = 30\nconst KNOB_RANGE = Range.create(-180 + KNOB_PADDING, 180 - KNOB_PADDING)\n\n@Component\nexport default class VKnob extends Vue {\n\n\t@VModel({ default: 1 })\n\tmodel!: number\n\n\t@Prop({ default: 25})\n\tsize!: string | number\n\n\t@Prop({ default: 10})\n\tmax!: number\n\n\t@Prop({ default: 1})\n\tmin!: number\n\n\t@Prop({ default: null })\n\tstep!: number | null\n\n\tget rotation() {\n\t\tconst { model, min: from, max: to } = this\n\t\treturn Range.map(model, { from, to }, KNOB_RANGE)\n\t}\n\n\tget style() {\n\t\tconst { size, rotation } = this\n\t\tconst sz = isString(size) ? size : `${size}px`\n\t\treturn {\n\t\t\twidth: sz,\n\t\t\theight: sz,\n\t\t\ttransform: `rotate(${rotation}deg)`\n\t\t}\n\t}\n\n\tgetCenter() {\n\t\tconst { x, y, width, height } = this.$el.getBoundingClientRect()\n\t\treturn {\n\t\t\tx: x + width / 2,\n\t\t\ty: y + height/ 2\n\t\t}\n\t}\n\n\tmouseTurning(event: MouseEvent) {\n\t\twindow.addEventListener('mousemove', this.turn)\n\t\twindow.addEventListener('mouseup', () => {\n\t\t\twindow.removeEventListener('mousemove', this.turn)\n\t\t})\n\t}\n\n\ttouchTurning(event: TouchEvent) {\n\t\tconst id = event.changedTouches[0].identifier\n\t\tconst turnFn = (event: TouchEvent) => {\n\t\t\tconst touch = Array.from(event.changedTouches)\n\t\t\t\t.find(e => e.identifier === id)\n\t\t\tif (touch != null) this.turn(touch)\n\t\t}\n\t\twindow.addEventListener('touchmove', turnFn)\n\t\twindow.addEventListener('touchend', () => {\n\t\t\twindow.removeEventListener('touchmove', turnFn)\n\t\t})\n\t}\n\n\tturn({ clientX, clientY }: { clientX: number, clientY: number }) {\n\t\tconst { x: originX, y: originY } = this.getCenter()\n\t\tconst { min: from, max: to, step } = this\n\t\tconst x = clientX - originX\n\t\tconst y = originY - clientY\n\t\tlet value = Degrees.fromRadians(Math.atan2(x, y))\n\t\tvalue = Range.clamp(value, KNOB_RANGE)\n\t\tvalue = Range.map(value, KNOB_RANGE, { from, to })\n\t\tthis.model = quantize(value, step ?? 0, from)\n\t}\n\n}\n","\n/// <reference types=\"@types/webmidi\" />\nimport { Vue, Component, Watch, Emit, Prop } from 'vue-property-decorator'\nimport Note from '@/utilities/note'\n\nconst MIDDLE_C_MIDI_VALUE = 60\n\nenum MidiCommand {\n\tNoteOff = 128,\n\tNoteOn = 144\n}\n\n@Component\nexport default class MidiSelect extends Vue {\n\n\t@Prop({ default: false})\n\tdisabled!: boolean\n\n\tinputMap: WebMidi.MIDIInputMap = new Map<string, WebMidi.MIDIInput>()\n\tselectedInputIndex: string = \"\"\n\n\tget supportsMidi() {\n\t\treturn !!navigator.requestMIDIAccess\n\t}\n\n\tget inputs() {\n\t\treturn Array.from(this.inputMap)\n\t}\n\n\tget selectedInput() {\n\t\tconst { selectedInputIndex: index, inputMap } = this\n\t\treturn index && inputMap.get(index) || null\n\t}\n\n\tget hasSelected() {\n\t\treturn !!this.selectedInputIndex\n\t}\n\n\tasync created() {\n\t\tif (!this.supportsMidi) return\n\t\tconst access = await navigator.requestMIDIAccess()\n\t\t// const stateChanged = () => {\n\t\t// \tthis.inputMap = access.inputs\n\t\t// \tif (this.hasSelected && !this.inputMap.has(this.selectedInputIndex))\n\t\t// \t\tthis.selectedInputIndex = \"\"\n\t\t// }\n\t\t// access.addEventListener('statechange', stateChanged)\n\t\t// stateChanged()\n\t\taccess.addEventListener('statechange', () => this.onMidiStateChanged(access))\n\t\tthis.onMidiStateChanged(access)\n\t}\n\n\t@Watch('selectedInput')\n\tselectedInputChanged(newInput: WebMidi.MIDIInput | null, oldInput: WebMidi.MIDIInput | null) {\n\t\toldInput?.removeEventListener('midimessage', this.onMidiMessage as EventListener)\n\t\tnewInput?.addEventListener(\"midimessage\", this.onMidiMessage)\n\t}\n\n\tonMidiStateChanged(access: WebMidi.MIDIAccess) {\n\t\tthis.inputMap = access.inputs\n\t\tif (this.hasSelected && !this.inputMap.has(this.selectedInputIndex))\n\t\t\tthis.selectedInputIndex = \"\"\n\t}\n\n\tonMidiMessage(event: WebMidi.MIDIMessageEvent) {\n\t\tconst [command, value, velocity] = event.data\n\t\tconst note = Note.transpose(\"C4\", value - MIDDLE_C_MIDI_VALUE)\n\t\tif (command === MidiCommand.NoteOff)\n\t\t\tthis.noteoff(note)\n\t\telse if (command === MidiCommand.NoteOn) {\n\t\t\tif (velocity)\n\t\t\t\tthis.noteon(note)\n\t\t\telse\n\t\t\t\tthis.noteoff(note)\n\t\t}\n\t}\n\n\t@Emit()\n\tnoteon(note: Note) {}\n\n\t@Emit()\n\tnoteoff(note: Note) {}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-knob.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-knob.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./v-knob.vue?vue&type=template&id=152c8123&scoped=true&lang=pug&\"\nimport script from \"./v-knob.vue?vue&type=script&lang=ts&\"\nexport * from \"./v-knob.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./v-knob.vue?vue&type=style&index=0&id=152c8123&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"152c8123\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.selectedInputIndex),expression:\"selectedInputIndex\",modifiers:{\"number\":true}}],staticClass:\"midi-select\",class:{\"midi-supported\": _vm.supportsMidi},attrs:{\"disabled\":_vm.disabled},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.selectedInputIndex=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.$emit(\"change\", $event)}]}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"none\")]),_vm._l((_vm.inputs),function(ref){\nvar key = ref[0];\nvar input = ref[1];\nreturn _c('option',{key:key,domProps:{\"value\":key,\"textContent\":_vm._s(input.name)}})})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./midi-select.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./midi-select.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./midi-select.vue?vue&type=template&id=c3650428&scoped=true&lang=pug&\"\nimport script from \"./midi-select.vue?vue&type=script&lang=ts&\"\nexport * from \"./midi-select.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./midi-select.vue?vue&type=style&index=0&id=c3650428&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c3650428\",\n  null\n  \n)\n\nexport default component.exports","\nimport { Component, Vue, Watch } from 'vue-property-decorator'\nimport instruments, { Instrument } from '@/instruments'\nimport * as Tone from 'tone'\nimport * as _Array from '@/utilities/array'\nimport * as _Object from '@/utilities/object'\nimport Note from '@/utilities/note'\nimport keyMap from '@/key-map'\n\nimport VPianoKeyboard from '@/components/v-piano-keyboard.vue'\nimport VLed from '@/components/v-led.vue'\nimport VKnob from '@/components/v-knob.vue'\nimport MidiSelect from '@/components/midi-select.vue'\n\nconst getKeyCount = () => (window.innerWidth < 720) ? 12 : 24\n\n@Component({\n\tcomponents: { VPianoKeyboard, VLed, VKnob, MidiSelect }\n})\nexport default class App extends Vue {\n\n\tplaying: Note[] = []\n\tinstruments = instruments\n\tinstrument: Instrument = instruments[0]\n\tsynth: Tone.Synth | null = null\n\tkeyCount = getKeyCount()\n\n\tget power() {\n\t\treturn (this.synth != null)\n\t}\n\n\tset power(power: boolean) {\n\t\tif (power) this.setSynth()\n\t\telse {\n\t\t\tthis.playing = []\n\t\t\ttry { this.synth?.dispose() }\n\t\t\tcatch (err) { console.error(err) }\n\t\t\tthis.synth = null\n\t\t} \n\t}\n\n\tget oscillators() {\n\t\treturn this.instrument?.oscillators ?? []\n\t}\n\n\tget oscillator() {\n\t\treturn this.synth?.get()?.oscillator?.type || \"\"\n\t}\n\n\tset oscillator(osc: string) {\n\t\tif (this.synth != null)\n\t\t\tthis.synth.set({ oscillator: { type: osc as any }})\n\t}\n\n\tget hasOscillator() {\n\t\treturn !!this.oscillator\n\t}\n\n\tget powerState() {\n\t\treturn this.power ? \"on\" : \"off\"\n\t}\n\n\tget isPolyphonic() {\n\t\treturn this.instrument.isPoly ?? false\n\t}\n\n\tget detune() {\n\t\treturn this.synth?.detune.value ?? 0\n\t}\n\n\tset detune(detune: number) {\n\t\tconst { synth } = this\n\t\tif (synth != null)\n\t\t\tsynth.detune.value = detune\n\t}\n\n\tget noteToKeyMap() {\n\t\treturn _Object.invert(keyMap)\n\t}\n\n\tget supportsMidi() {\n\t\treturn !!navigator.requestMIDIAccess\n\t}\n\n\tisPlaying(note?: Note) {\n\t\tconst { playing } = this\n\t\treturn (note == null) ? !!playing.length : playing.includes(note)\n\t}\n\n\ttogglePower() {\n\t\tthis.power = !this.power\n\t}\n\n\tblurMe(event: Event) {\n\t\tconst elem = event.target as HTMLElement\n\t\telem?.blur?.()\n\t}\n\n\t@Watch('instrument')\n\tsetSynth({ oscillators = [], instrument}: Instrument = this.instrument) {\n\t\tconst type: any = oscillators[0]\n\t\tconst opts = type ? { oscillator: { type }} : undefined\n\t\ttry { this.synth?.dispose() }\n\t\tcatch (err) { console.error(err) }\n\t\tthis.synth = new instrument(opts).toDestination()\n\t}\n\n\tnoteOn(note: Note) {\n\t\tif (!this.isPlaying(note))\n\t\t\tthis.playing = [...this.playing, note]\n\t}\n\n\tnoteOff(note: Note) {\n\t\tif (this.isPlaying(note))\n\t\t\tthis.playing = this.playing.filter(n => n !== note)\n\t}\n\n\t@Watch('playing')\n\tupdatePlaying(now: Note[], prev: Note[]) {\n\t\tif (!this.power) return\n\t\tif (this.instrument.isPoly)\n\t\t\tthis.updatePlayingPolyphonic(now, prev)\n\t\telse\n\t\t\tthis.updatePlayingMonophonic(now, prev)\n\t}\n\n\tupdatePlayingMonophonic(now: Note[], prev: Note[]) {\n\t\tconst { synth } = this\n\t\tconst nowNote = _Array.last(now)\n\t\tconst prevNote = _Array.last(prev)\n\t\tconst canSetNote = !!synth?.setNote\n\t\tif (nowNote !== prevNote) {\n\t\t\tif (nowNote && prevNote && canSetNote)\n\t\t\t\tsynth?.setNote(nowNote)\n\t\t\telse if (nowNote && !prev.includes(nowNote))\n\t\t\t\tsynth?.triggerAttack(nowNote)\n\t\t\telse\n\t\t\t\tsynth?.triggerRelease()\n\t\t}\n\t}\n\n\tupdatePlayingPolyphonic(now: Note[], prev: Note[]) {\n\t\tconst { synth } = this\n\t\tconst stop = prev.filter(note => !now.includes(note))\n\t\tconst play = now.filter(note => !prev.includes(note))\n\t\tstop.forEach(note => synth?.triggerRelease(note))\n\t\tplay.forEach(note => synth?.triggerAttack(note))\n\t}\n\n\tcreated() {\n\t\twindow.addEventListener(\"resize\", event => {\n\t\t\tthis.keyCount = getKeyCount()\n\t\t})\n\n\t\twindow.addEventListener(\"keydown\", event => {\n\t\t\tconst note = keyMap[event.key]\n\t\t\tif (this.power && (note != null) && !this.isPlaying(note))\n\t\t\t\tthis.playing = [...this.playing, note]\n\t\t})\n\n\t\twindow.addEventListener(\"keyup\", event => {\n\t\t\tconst note = keyMap[event.key]\n\t\t\tif (this.power && (note != null))\n\t\t\t\tthis.playing = this.playing.filter(down => down !== note)\n\t\t})\n\t}\n\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./app.vue?vue&type=template&id=37439ac5&scoped=true&lang=pug&\"\nimport script from \"./app.vue?vue&type=script&lang=ts&\"\nexport * from \"./app.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./app.vue?vue&type=style&index=0&id=37439ac5&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37439ac5\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './app.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n\trender: h => h(App),\n}).$mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./v-piano-keyboard.vue?vue&type=style&index=0&id=14a00721&lang=sass&scoped=true&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./app.vue?vue&type=style&index=0&id=37439ac5&lang=sass&scoped=true&\""],"sourceRoot":""}